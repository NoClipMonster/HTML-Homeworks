<!DOCTYPE html>
<html>

<head>
    <title>Главная страница</title>    
    <meta charset="UTF-8">
</head>
<body>
    
    <style>


        .grain {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
            background-color: rgb(100 100 100);
        }

        .apo1 {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0px;
            z-index: -1;
        }

        h1 {
            position:relative;
            text-align:center;
        }

        #MainSvg {
            width: 100%;
            position: relative;
            z-index: 1;
            left: 0;
            top: 0;
            /*
             left: 50%;
            -webkit-transform: translateX(-50%);
            -ms-transform: translateX(-50%);
            transform: translateX(-50%);
            */
        }
        #maintxt {
            font-size: 40px;
            fill: black;
            font-family: Segoe UI;
            font-weight: 500;
        }
        text {
            font-size: 20px;
            fill: white;
           font-family: Segoe UI;
           font-weight:100;
        }
        .quarect {
            position: relative;
            z-index: 3;
            fill: rgb(100,100,100);
            /*96,96,96*/
        }
        .quaText {
            position: relative;
            z-index: 2;
            
        }
    </style>
  
        <canvas id="BackNoise" class="grain"></canvas>

        <svg id="MainSvg" height="200">

            <text id="maintxt" text-anchor='middle' x=50% y=40px>Главная страница</text>

        </svg>
    
        <script>
            /*function getTextWidth(text, font = getCanvasFontSize()) {
  // re-use canvas object for better performance
  const canvas = getTextWidth.canvas || (getTextWidth.canvas = document.createElement("canvas"));
  const context = canvas.getContext("2d");
  context.font = font;
  const metrics = context.measureText(text);
  return metrics.width;
}

function getCssStyle(element, prop) {
    return window.getComputedStyle(element, null).getPropertyValue(prop);
}

function getCanvasFontSize(el = document.body) {
  const fontWeight = getCssStyle(el, 'font-weight') || 'normal';
  const fontSize = getCssStyle(el, 'font-size') || '16px';
  const fontFamily = getCssStyle(el, 'font-family') || 'Times New Roman';

  return `${fontWeight} ${fontSize} ${fontFamily}`;
}

console.log(getTextWidth("hello there!", "bold 12pt arial"));  // close to 86*/
            var MainSvg = document.getElementById("MainSvg");
            createElem(15, 50, 200, 28, "Домашняя работу №1", "HomeWork 1.html");
            createElem(15, 90, 125, 28, "Шумный фон", "noise.html");
            createElem(15, 130, 170, 28, "Генератор кнопок", "rectCreator.html");
            function createElem(x, y, w, h, text, ref) {

                var rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                rect.setAttribute("width", w);
                rect.setAttribute("height", h);
                rect.setAttribute("x", x);
                rect.setAttribute("y", y);
                rect.setAttribute("style", "fill:black; filter:blur(1px)");

                var rect1 = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                rect1.setAttribute("width", w);
                rect1.setAttribute("height", h);
                rect1.setAttribute("x", x);
                rect1.setAttribute("y", y);
                rect1.setAttribute("style", "fill:#696969; cursor:pointer;");
                rect1.onclick = function () { location.replace(ref); }

                var textline = document.createElementNS("http://www.w3.org/2000/svg", "text");
                textline.setAttribute("x", x + 5);
                textline.setAttribute("y", y + 20);
                textline.setAttribute("style", "font-size:20px; font-family:Segoe UI; fill:white; font-weight:100; cursor:pointer;")
                textline.textContent = text;
                textline.onclick = function () { location.replace(ref); }

                MainSvg.appendChild(rect);
                MainSvg.appendChild(rect1);
                MainSvg.appendChild(textline);
            }

            var Grain = function () {
                function Grain(el) {
                    /*
                     Options
                    */
                    this.patternSize = 100;
                    this.patternAlpha = 8; // 0 <= x <= 255,
                    var seed = 16758672;

                    this.canvas = el;
                    this.ctx = this.canvas.getContext('2d');

                    this.patternCanvas = document.createElement('canvas');
                    this.patternCanvas.width = this.patternSize;
                    this.patternCanvas.height = this.patternSize;
                    this.patternCtx = this.patternCanvas.getContext('2d');
                    this.patternData = this.patternCtx.createImageData(this.patternSize, this.patternSize);
                    this.patternPixelDataLength = this.patternSize * this.patternSize * 4; // rgba = 4
                    this.resize = this.resize.bind(this);

                    window.addEventListener('resize', this.resize);

                    var patternPixelDataLength = this.patternPixelDataLength;
                    var patternData = this.patternData;
                    var patternAlpha = this.patternAlpha;
                    var patternCtx = this.patternCtx;
       
                    // put a random shade of gray into every pixel of the pattern
                    for (var i = 0; i < patternPixelDataLength; i += 4) {
                        const r = ((21 * seed + 10) % 99) / 88;
                        seed = seed + r * 19;
                        const value = r*255;
                        patternData.data[i] = value;
                        patternData.data[i + 1] = value;
                        patternData.data[i + 2] = value;
                        patternData.data[i + 3] = patternAlpha;
                    }
                   
                    patternCtx.putImageData(patternData, 0, 0);
                    this.resize();
                    
                }
                Grain.prototype.resize = function resize() {
                    this.canvas.width = window.innerWidth * devicePixelRatio;
                    this.canvas.height = window.innerHeight * devicePixelRatio;
                    this.draw();
                };
                Grain.prototype.draw = function draw() {
                    var ctx = this.ctx;
                    var patternCanvas = this.patternCanvas;
                    var canvas = this.canvas;
                    var width = canvas.width;
                    var height = canvas.height;
                    // clear canvas
                    ctx.clearRect(0, 0, width, height);
                    // fill the canvas using the pattern
                    ctx.fillStyle = ctx.createPattern(patternCanvas, 'repeat');
                    ctx.fillRect(0, 0, width, height);
                };
                return Grain;
            }();

            var el = document.getElementById('BackNoise');
            var grain = new Grain(el);

        </script>

</body>
</html>
