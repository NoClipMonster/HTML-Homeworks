<!DOCTYPE html>
<html>

<head>
    <title>Главная страница</title>    
</head>
<body onload="start()">

    <style>

        .grain {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
            background-color: rgb(100 100 100);
        }

        #maintxt {
            font-size: 40px;
            fill: black;
            font-family: Segoe UI;
            font-weight: 500;
        }

        text {
            font-size: 20px;
            fill: white;
            font-family: Segoe UI;
            font-weight: 100;
            transform: scale(%)
        }

        .quarect {
            position: relative;
            z-index: 3;
            fill: rgb(100,100,100);
            /*96,96,96*/
        }

        #MainSvg {
            width: 400px;
            height: 100%;
            position: absolute;
            z-index: 1;
            bottom: 1px;
            left: 50%;
            -webkit-transform: translateX(-50%);
            -ms-transform: translateX(-50%);
            transform: translateX(-50%);
            border: 1px solid;
        }

        .sideSVG {
            height: 100%;
            background-color: rgb(0,0,0,0.1);
            position: absolute;
            z-index: 1;
            top: 0;
        }
    </style>



    <svg class="sideSVG" id="left" style="left:0"></svg>
    <svg class="sideSVG" id="right" style="right:0"></svg>

    <svg id="MainSvg">
        <text id="maintxt" text-anchor='middle' x=50% y=40px>Главная страница</text>
    </svg>

    <canvas style="background-color:transparent" id="canvas"></canvas>
    <canvas id="BackNoise" class="grain"></canvas>
    <script src="BackGroundNoise.js"></script>

    <script>
        
       
        /*function getTextWidth(text, font = getCanvasFontSize()) {
// re-use canvas object for better performance
const canvas = getTextWidth.canvas || (getTextWidth.canvas = document.createElement("canvas"));
const context = canvas.getContext("2d");
context.font = font;
const metrics = context.measureText(text);
return metrics.width;
}

function getCssStyle(element, prop) {
return window.getComputedStyle(element, null).getPropertyValue(prop);
}

function getCanvasFontSize(el = document.body) {
const fontWeight = getCssStyle(el, 'font-weight') || 'normal';
const fontSize = getCssStyle(el, 'font-size') || '16px';
const fontFamily = getCssStyle(el, 'font-family') || 'Times New Roman';

return `${fontWeight} ${fontSize} ${fontFamily}`;
}

console.log(getTextWidth("hello there!", "bold 12pt arial"));  // close to 86*/
        var MainSvg = document.getElementById("MainSvg");
        var BordCl = document.getElementsByClassName("sideSVG");
        var MainSvgWidth = 400;
        BordCl[0].setAttribute("width", (window.innerWidth / 2) - MainSvgWidth / 2);
        BordCl[1].setAttribute("width", (window.innerWidth / 2) - MainSvgWidth / 2);

        createElem(15, 50, 210, 28, "Домашняя работу №1", "HomeWork_1.html");
        createElem(15, 90, 125, 28, "Шумный фон", "noise.html");
        createElem(15, 130, 170, 28, "Генератор кнопок", "rectCreator.html");
        createElem(15, 170, 210, 28, "Домашняя работу №2", "HomeWork_2.html");
        function createElem(x, y, w, h, text, ref) {

            var rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
            rect.setAttribute("width", w);
            rect.setAttribute("height", h);
            rect.setAttribute("x", x);
            rect.setAttribute("y", y);
            rect.setAttribute("style", "fill:black; filter:blur(1px)");

            var rect1 = document.createElementNS("http://www.w3.org/2000/svg", "rect");
            rect1.setAttribute("width", w);
            rect1.setAttribute("height", h);
            rect1.setAttribute("x", x);
            rect1.setAttribute("y", y);
            rect1.setAttribute("style", "fill:#696969; cursor:pointer;");
            rect1.onclick = function () { location.replace(ref); }

            var textline = document.createElementNS("http://www.w3.org/2000/svg", "text");
            textline.setAttribute("x", x + 5);
            textline.setAttribute("y", y + 20);
            textline.setAttribute("style", "font-size:20px; font-family:Segoe UI; fill:white; font-weight:100; cursor:pointer;")
            textline.textContent = text;
            textline.onclick = function () { location.replace(ref); }

            MainSvg.appendChild(rect);
            MainSvg.appendChild(rect1);
            MainSvg.appendChild(textline);
        }
        

        let myGamePiece = new Array();

        function start() {
         myGameArea.start();
        }

        var myGameArea = {
            canvas: canvas,
            start: function () {
                this.canvas.width = (window.innerWidth / 2) - MainSvgWidth / 2;
                this.canvas.height = window.innerHeight;
                this.canvas.style = "z-index:1; position:absolute; top: 0px; left: 0px;";
                this.context = this.canvas.getContext("2d");
                this.interval = setInterval(updateGameArea, 17);
                function rand(max) {
                    return Math.floor(Math.random() * max)
                }
                for (var g = 0; g < 1; g++) {
                    myGamePiece[g] = new component("rgb(" + rand(256) + "," + rand(256) + "," + rand(256) + ")");
                }
            },
            clear: function () {
                this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
            }
        }
       
        function component(color) {
            this.width = 110;
            this.height = 95;
            this.x = Math.floor(Math.random() * (myGameArea.canvas.width-200)+30);
            this.y = Math.floor(Math.random() * (myGameArea.canvas.height - 220));
            this.xdir = Math.floor(Math.random() * 10) - 5;
            this.ydir = Math.floor(Math.random() * 10) - 5;
            this.update = function () {

                ctx = myGameArea.context;
                
             //  ctx.fillRect(this.x + 20, this.y + 25, this.width, this.height);
;
                ctx.fill();
                ctx.fillStyle = color;
                ctx.beginPath();
                ctx.moveTo(75+this.x, 37+ this.y);
                bezierCurveTo(75, 37, 70, 25, 50, 25, this.x, this.y);
                bezierCurveTo(20, 25, 20, 62.5, 20, 62.5, this.x, this.y);
                bezierCurveTo(20, 80, 40, 102, 75, 120, this.x, this.y);
                bezierCurveTo(110, 102, 130, 80, 130, 62.5, this.x, this.y);
                bezierCurveTo(130, 62.5, 130, 25, 100, 25, this.x, this.y);
                bezierCurveTo(85, 25, 75, 37, 75, 40, this.x, this.y);
                ctx.fill();
                ctx.closePath();
                function bezierCurveTo(q, w, e, r, t, u, xx, yy) {
                    ctx.bezierCurveTo(q + xx, w + yy, e + xx, r + yy, t + xx, u + yy);
                }
                //ctx.fillRect(this.x, this.y, this.width, this.height);
            }
        }
        bezierCurveTo(85, 25, 75, 37, 75, 40, this.x, this.y);
       
        function bezierCurveTo(q, w, e, r, t, u, xx, yy) {
            ctx.bezierCurveTo(q + xx, w + yy, e + xx, r + yy, t + xx, u + yy);
        }
        function updateGameArea() {
            myGameArea.clear();
            for (var g = 0; myGamePiece.length; g++)
            {
                myGamePiece[g].x += myGamePiece[g].xdir;
                myGamePiece[g].y += myGamePiece[g].ydir;
                if (myGamePiece[g].x+20 + myGamePiece[g].width >= myGameArea.canvas.width || myGamePiece[g].x+20 <= 0) { myGamePiece[g].xdir *= -1 }
                if (myGamePiece[g].y+25 + myGamePiece[g].height >= myGameArea.canvas.height || myGamePiece[g].y+25 <= 0) { myGamePiece[g].ydir *= -1 }
                myGamePiece[g].update();
            }
               
           
        }
    </script>

</body>
</html>
